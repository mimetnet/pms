MFLAGS = $(DEBUG_FLAGS) $(TIMEOUT_FLAGS) -nologo -d:$(MONO_VERSION) -keyfile:$(top_srcdir)/src/sec.snk

SOURCES_file = bin/$(ASSEMBLY).sources

noinst_SCRIPTS = $(ASSEMBLY)

CLEANFILES = $(ASSEMBLY) $(ASSEMBLY).mdb $(SOURCES_file)

EXTRA_DIST = $(SOURCES) $(subst .dll,.csproj,$(ASSEMBLY)) $(SOURCES_file)

$(ASSEMBLY): $(SOURCES) $(SOURCES_file)
	$(MCS) $(MFLAGS) -target:exe -out:$@ $(REFERENCES) @$(SOURCES_file)

install-data-local:
	$(install_sh) -d $(DESTDIR)$(purdydir)
	$(install_sh_DATA) -t $(DESTDIR)$(purdydir)/ $(ASSEMBLY)

uninstall-local:
	rm $(DESTDIR)$(purdydir)/$(ASSEMBLY)

$(SOURCES_file):
	@echo $(SOURCES) > $(SOURCES_file)
